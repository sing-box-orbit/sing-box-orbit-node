# sing-box-orbit-node

REST API —Å–µ—Ä–≤–µ—Ä –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è [sing-box](https://sing-box.sagernet.org/) ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Å–∏-–ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π.

**[üá¨üáß English version](README.md)**

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞/–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ sing-box –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –∏ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è API-key –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [Bun](https://bun.sh/) >= 1.0
- sing-box –±–∏–Ω–∞—Ä–Ω–∏–∫ (—Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repo-url>
cd sing-box-orbit-node

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
bun install

# –°–∫–∞—á–∞—Ç—å sing-box –±–∏–Ω–∞—Ä–Ω–∏–∫ –¥–ª—è –≤–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
bun run setup

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é sing-box
mkdir -p data
# –ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤–∞—à config.json –≤ ./data/config.json

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
bun run dev
```

## –°–∫—Ä–∏–ø—Ç—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `bun run dev` | –ó–∞–ø—É—Å–∫ —Å hot-reload |
| `bun run start` | –ó–∞–ø—É—Å–∫ –≤ production —Ä–µ–∂–∏–º–µ |
| `bun run build` | –°–±–æ—Ä–∫–∞ –≤ standalone executable |
| `bun run setup` | –°–∫–∞—á–∞—Ç—å sing-box –±–∏–Ω–∞—Ä–Ω–∏–∫ |
| `bun run lint` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ (Biome) |
| `bun run lint:fix` | –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ lint –æ—à–∏–±–æ–∫ |
| `bun run format` | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ |
| `bun run typecheck` | –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript —Ç–∏–ø–æ–≤ |

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`):

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `NODE_ENV` | development | –†–µ–∂–∏–º –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| `HOST` | 0.0.0.0 | –ê–¥—Ä–µ—Å –ø—Ä–∏–≤—è–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ |
| `PORT` | 3333 | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ |
| `API_KEY` | ‚Äî | API –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| `SINGBOX_BIN` | ./bin/sing-box | –ü—É—Ç—å –∫ sing-box –±–∏–Ω–∞—Ä–Ω–∏–∫—É |
| `SINGBOX_CONFIG_PATH` | ./data/config.json | –ü—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |
| `SINGBOX_WORKING_DIR` | ./data | –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è |
| `LOG_LEVEL` | info | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |

## API Endpoints

–ë–∞–∑–æ–≤—ã–π URL: `http://localhost:3333`

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `API_KEY`, –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫:
- `Authorization: Bearer <key>` –∏–ª–∏
- `X-API-Key: <key>`

### Endpoints

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| `GET` | `/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞ |
| `GET` | `/server/status` | –°—Ç–∞—Ç—É—Å sing-box –ø—Ä–æ—Ü–µ—Å—Å–∞ |
| `POST` | `/server/reload` | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |
| `GET` | `/server/logs?limit=100` | –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ |

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```json
{
  "success": true,
  "data": { ... }
}
```

–ü—Ä–∏ –æ—à–∏–±–∫–µ:

```json
{
  "success": false,
  "error": "Error message",
  "code": "ERROR_CODE"
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:3333/health

# –°—Ç–∞—Ç—É—Å sing-box (—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π)
curl -H "X-API-Key: your-api-key" http://localhost:3333/server/status

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
curl -X POST -H "X-API-Key: your-api-key" http://localhost:3333/server/reload

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
curl -H "X-API-Key: your-api-key" "http://localhost:3333/server/logs?limit=50"
```

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- Scalar UI: `http://localhost:3333/docs`
- OpenAPI JSON: `http://localhost:3333/openapi.json`

## Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t sing-box-orbit-node .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d \
  -p 3333:3333 \
  -v $(pwd)/data:/app/data \
  -e API_KEY=your-secret-key \
  sing-box-orbit-node
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
sing-box-orbit-node/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ app.ts            # Hono –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.ts         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ api/              # API —Ä–æ—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ middleware/       # Middleware
‚îÇ   ‚îú‚îÄ‚îÄ types/            # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ scripts/              # –°–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ bin/                  # sing-box –±–∏–Ω–∞—Ä–Ω–∏–∫
‚îú‚îÄ‚îÄ data/                 # –†–∞–±–æ—á–∏–µ –¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ dist/                 # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Runtime**: [Bun](https://bun.sh/)
- **Framework**: [Hono](https://hono.dev/)
- **API Schema**: [fets](https://github.com/ardatan/feTS) + [TypeBox](https://github.com/sinclairzx81/typebox)
- **Docs**: [Scalar](https://scalar.com/)
- **Linter**: [Biome](https://biomejs.dev/)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
